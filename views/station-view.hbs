{{> menu active="dashboard"}}

<section class="section">
  <h2 class="title is-2">{{station.title}} ({{station.city}})</h2>

  <!-- Add new weather report -->
  <form action="/station/{{station._id}}/addreport" method="POST" class="mb-3">
    <button class="button is-link">Add Weather Report</button>
  </form>

  {{#if latestReport}}
  <div class="box has-background-light">
    <h3 class="title is-4">Latest Weather</h3>
    <div class="columns">
      <div class="column"><strong>Code:</strong> {{latestReport.code}}</div>
      <div class="column"><strong>Temperature:</strong> {{latestReport.temperature}} 째C</div>
      <div class="column"><strong>Wind:</strong> {{latestReport.windSpeed}} m/s @ {{latestReport.windDirection}}째</div>
      <div class="column"><strong>Pressure:</strong> {{latestReport.pressure}} hPa</div>
    </div>
  </div>
  {{/if}}
  
  <!-- Reports table -->
  {{#if station.reports.length}}
  <table class="table is-fullwidth is-striped">
    <thead>
      <tr>
        <th>Code</th>
        <th>Temperature (째C)</th>
        <th>Wind Speed </th>
        <th>Wind Direction (째)</th>
        <th>Pressure </th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {{#each station.reports}}
      <tr>
        <td>{{code}}</td>
        <td>{{temperature}}</td>
        <td>{{windSpeed}}</td>
        <td>{{windDirection}}</td>
        <td>{{pressure}}</td>
        <td>
          <a href="/station/{{../station._id}}/deletereport/{{_id}}" class="button is-danger is-small">Delete</a>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
  {{else}}
    <p>No reports yet for this station.</p>
  {{/if}}
<a href="/dashboard" class="button is-light mt-3">Back to Dashboard</a>
  
</section>
